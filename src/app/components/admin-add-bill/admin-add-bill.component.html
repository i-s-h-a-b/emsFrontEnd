<div class="page">
  <h2>Add Bill (Admin)</h2>

  <div class="error" *ngIf="error()">{{ error() }}</div>
  <div class="success" *ngIf="message()">{{ message() }}</div>

  <form [formGroup]="billForm" class="card">

    <label>Customer ID *</label>
    <input type="number" formControlName="customerId" placeholder="Enter customer ID">
    <div class="error" *ngIf="billForm.get('customerId')?.invalid && billForm.get('customerId')?.touched">
      Customer ID is required
    </div>

    <label>Billing Period * (YYYY-MM)</label>
    <input placeholder="e.g. 2025-01" formControlName="billingPeriod">
    <div class="error" *ngIf="billForm.get('billingPeriod')?.invalid && billForm.get('billingPeriod')?.touched">
      Billing period is required (format: YYYY-MM)
    </div>

    <label>Bill Date *</label>
    <input type="date" formControlName="billDate">

    <label>Due Date *</label>
    <input type="date" formControlName="dueDate">

    <label>Bill Amount *</label>
    <input type="number" step="0.01" formControlName="billAmount" placeholder="0.00">

    <label>Late Fee *</label>
    <input type="number" step="0.01" formControlName="lateFee" placeholder="0.00">

    <label>Connection Type *</label>
    <select formControlName="connectionType">
      <option value="DOMESTIC">Domestic</option>
      <option value="COMMERCIAL">Commercial</option>
    </select>

    <label>Connection Status *</label>
    <select formControlName="connectionStatus">
      <option value="CONNECTED">Connected</option>
      <option value="DISCONNECTED">Disconnected</option>
    </select>

    <button type="button" class="primary-btn" (click)="saveBill()" [disabled]="isLoading()">
      {{ isLoading() ? 'Saving...' : 'Save Bill' }}
    </button>

    <button type="button">Bulk Upload Bills</button>
    <button type="button">Back to Dashboard</button>

  </form>

  <!-- Confirmation -->
  <div class="card" *ngIf="savedBill()">
    <h3>✅ Bill Added Successfully</h3>
    <p><b>Bill ID:</b> {{ savedBill()?.billId }}</p>
    <p><b>Customer ID:</b> {{ savedBill()?.customerId }}</p>
    <p><b>Billing Period:</b> {{ savedBill()?.billingPeriod }}</p>
    <p><b>Bill Amount:</b> ₹{{ savedBill()?.billAmount }}</p>
    <p><b>Late Fee:</b> ₹{{ savedBill()?.lateFee }}</p>
    <p><b>Due Amount:</b> ₹{{ savedBill()?.dueAmount }}</p>
    <p><b>Connection Type:</b> {{ savedBill()?.connectionType }}</p>
    <p><b>Connection Status:</b> {{ savedBill()?.connectionStatus }}</p>
    <p><b>Payment Status:</b> {{ savedBill()?.paymentStatus }}</p>

    <button>Add Another Bill</button>
    <button>Return to Dashboard</button>
  </div>
</div>