<div class="container mt-3">
  <h2>SME List</h2>

  <!-- Filter -->
  <div class="card p-3 mb-3">
    <div class="row align-items-end">
      <div class="col-md-4">
        <label>Filter by SME ID</label>
        <input type="number" class="form-control" [(ngModel)]="smeId">
      </div>
      <div class="col-md-2">
        <button class="btn btn-primary w-100" (click)="search()">Search</button>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="loading()" class="text-center my-4">
    <div class="spinner-border text-primary"></div>
  </div>

  <!-- Error -->
  <div *ngIf="errorMessage()" class="alert alert-danger">
    {{ errorMessage() }}
  </div>

  <!-- Table -->
  <table *ngIf="!loading() && smes().length"
         class="table table-bordered table-hover shadow-sm">

    <thead class="table-light">
      <tr>
        <th>SME ID</th>
        <th>Name</th>
        <th>Mobile</th>
        <th>Email</th>
        <th>User ID</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let sme of smes()">
        <td>{{ sme.smeId }}</td>
        <td>{{ sme.fname }} {{ sme.lname }}</td>
        <td>{{ sme.mobileNumber }}</td>
        <td>{{ sme.userEmail }}</td>
        <td>{{ sme.userId }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Empty -->
  <div *ngIf="!loading() && smes().length === 0"
       class="alert alert-info">
    No SMEs found.
  </div>

  <!-- Pagination -->
  <div class="d-flex justify-content-between mt-3"
       *ngIf="totalPages() > 1">
    <button class="btn btn-outline-secondary"
            (click)="prev()"
            [disabled]="page() === 0">
      Previous
    </button>

    <span class="align-self-center">
      Page {{ page() + 1 }} of {{ totalPages() }}
    </span>

    <button class="btn btn-outline-secondary"
            (click)="next()"
            [disabled]="page() + 1 >= totalPages()">
      Next
    </button>
  </div>
</div>
